language: cpp

sudo: required

os:
  - linux
  - osx

env:
  - QT_VERSION=qt4
  - QT_VERSION=qt5

install:
  - source .travis/install.sh
  - source .travis/deploy.sh

script: ./.travis/script.sh

deploy:
  provider: releases
  api_key:
    secure: LdMU6bfPozM1sD+k/GVcTbmh+tlDuLzyQKbS38+3KOYhoVFVlOA2d1vymDI8BmQ66xSYa6yGBZ3Zu3MbV+aiukSNMp+QnS4q0mySxq7iUNdhEAI9a9GcljYvxo/Oj3BeJpksX6JgIhZK06wnafb1E6jdh6i1d+DldMK36PjMeVg=
  skip_cleanup: true
  file_glob: true
  file:
    - build/neuroscope*.deb
    - build/neuroscope*.dmg
  on:
    tags: true
    condition: "$ENABLE_DEPLOYMENT = true"
